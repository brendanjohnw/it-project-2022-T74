<script src="/public/js/bootstrap.js"></script>
<!-- Allows the user to edit a book they currently have -->

<head>
    <script crossorigin="anonymous" src="https://kit.fontawesome.com/2e58876b6d.js"></script>

    <link href="/public/css/styles.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

</head>

<body>
    {{#each flash}}
    <div class="alert alert-danger" style="text-align:center">
        <strong>{{this}}</strong>
        <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
    </div>
    {{/each}}
    <div class="card mb-3">
        <div class=" row g-0">
            {{#each BookData}}
            <div class="col-md-4">
                <img src="/public/uploads/{{filename}}" width="350" height="500" style="object-fit: cover"
                    class="shadow" alt="...">
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h1> Edit Your Book and Save the Changes! </h1>
                    <div class="p-2">
                        <form action="/edit-book" id="edit-book" method="post" enctype="multipart/form-data">
                            <input type="hidden" id="bookId" name="bookId" value="{{_id}}">
                            <br>
                            <div class="form-outline">
                                <label for="image">Upload an image:</label>
                                <input class="form-control form-control-sm" type="file" name="image" id="image" 
                                accept="image/jpeg, image/png, image/jpg">
                            </div>
                            <br>
                            <div class="form-outline">
                                <label for="title"><span style="color:red;">*</span>Title:</label>
                                <input type="text" name="title" id="title" class="form-control form-control-sm"
                                    value="{{title}}" />
                            </div>
                            <br>
                            <div class="form-outline">
                                <label for="author"><span style="color:red;">*</span>Author:</label>
                                <input type="text" name="author" id="author" class="form-control form-control-sm"
                                    value="{{author}}" />
                            </div>
                            <br>
                            <label for="genre">Choose a genre:</label>
                            <select class="form-select form-select-sm" name="genre" id="genre">
                                <option value="{{genre}}">{{genre}}</option>
                                <option value="Fantasy">Fantasy</option>
                                <option value="Science Fiction">Science Fiction</option>
                                <option value="Action Adventure">Action Adventure</option>
                                <option value="Mystery">Mystery</option>
                                <option value="Horror">Horror</option>
                                <option value="Historical Fiction">Historical Fiction</option>
                                <option value="Romance">Romance</option>
                                <option value="Contemporary Fiction">Contemporary Fiction</option>
                                <option value="Young Adult">Young Adult</option>
                                <option value="Children’s">Children’s</option>
                                <option value="Biography">Biography</option>
                                <option value="Food and Drink">Food and Drink</option>
                                <option value="Art and Photography">Art and Photography</option>
                                <option value="Self-help">Self-help</option>
                                <option value="Travel">Travel</option>
                                <option value="Other">Other</option>
                            </select> 
                            <br>
                            <div class="form-outline">
                                <label for="description">Description:</label>
                                <textarea name="description" id="description" class="form-control form-control-sm" 
                                rows="3" form="edit-book" oninput="countChars()">{{description}}</textarea>
                                <p align="right"><font size="2"><span id="count">0</span>/150</font></p>
                                <script>
                                    var count = document.getElementById("description").value.length;
                                    document.getElementById("count").innerHTML = `${count}`;
                                    
                                    function countChars() {
                                        var numChars = document.getElementById("description").value.length;
                                        if (numChars > 150) {
                                            document.getElementById("count").style = "color:red";
                                        } else {
                                            document.getElementById("count").style = "";
                                        }
                                        document.getElementById("count").innerHTML = `${numChars}`;
                                    }
                                </script>
                            </div>
                            <br>
                            {{/each}}
                            <button id="cancel-edit" type="button" onclick="window.location='/dashboard';return false;"
                                class="btn btn-dark btn-md redButton">Cancel</button>
                            <button id="save-edit" type="submit" class="btn btn-primary btn-md">Save The Book!</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>




</body>